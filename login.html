<html>
<head>

	<script src="js/cognito.js"></script>

	<!-- AWS SDK -->
	<script src="https://sdk.amazonaws.com/js/aws-sdk-2.238.1.min.js"></script>

</head>

<body>
	<script src="js/config.js"> </script>

	<script>
		var authData = {
			ClientId : config.cognitoAppId.value, // Your client id here
			AppWebDomain : config.cognitoAppDomain.value+".auth."+config.awsRegion.value +".amazoncognito.com",
			TokenScopesArray : ['email', 'openid'], 
			RedirectUriSignIn : config.cognitoCallbackUrls.value[0],
			RedirectUriSignOut : config.cognitoLogoutUrls.value[0]
		};
		
		var auth = new AmazonCognitoIdentity.CognitoAuth(authData);

		auth.userhandler = {
			onSuccess: function(result) {
				console.log(result);
			},
			onFailure: function(err) {
				alert("Error signing in!");
			}
		};

		if (!auth.isUserSignedIn(auth.getCurrentUser())) {
			console.log("user not signed in");
			auth.getSession()
		} else{
			console.log("user is signed in");
			window.location = authData.RedirectUriSignIn;
		}
	</script>
</body>


</html>
